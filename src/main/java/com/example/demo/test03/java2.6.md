# Java

## 集合

#####1. hashMap具体如何实现的
        
    考点：集合
    
    参考回答：
    Hashmap基于数组实现的，通过对key的hashcode & 数组的长度得到在数组中位置，
    如当前数组有元素，则数组当前元素next指向要插入的元素，
    这样来解决hash冲突的，形成了拉链式的结构。
    put时在多线程情况下，会形成环从而导致死循环。
    数组长度一般是2n，从0开始编号，所以hashcode & （2n-1），（2n-1）每一位都是1，
    这样会让散列均匀。需要注意的是，HashMap在JDK1.8的版本中引入了红黑树结构做优化，
    当链表元素个数大于等于8时，链表转换成树结构；
    若桶中链表元素个数小于等于6时，树结构还原成链表。
    因为红黑树的平均查找长度是log(n)，
    长度为8的时候，平均查找长度为3，
    如果继续使用链表，平均查找长度为8/2=4，这才有转换为树的必要。
    链表长度如果是小于等于6，6/2=3，虽然速度也很快的，
    但是转化为树结构和生成树的时间并不会太短。
    还有选择6和8，中间有个差值7可以有效防止链表和树频繁转换。
    假设一下，如果设计成链表个数超过8则链表转换成树结构，
    链表个数小于8则树结构转换成链表，
    如果一个HashMap不停的插入、删除元素，链表个数在8左右徘徊
    ，就会频繁的发生树转链表、链表转树，效率会很低。
    但是永远无法被加载运行。
    
                